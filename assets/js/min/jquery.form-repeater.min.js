!function($){function t(t){var e=t.data,a=e.repeatCount+1,n=e.groupClone.clone();return $.isFunction(e.opts.beforeAdd)&&(n=e.opts.beforeAdd.call(this,n)),e.opts.maxItems>0&&e.repeatCount==e.opts.maxItems?(alert("You have hit the maximum allowable items."),!1):(r(n,a,e),n.find("."+e.opts.btnRemoveClass).show(),"append"==e.opts.repeatMode?n.appendTo(e):"prepend"==e.opts.repeatMode?n.prependTo(e):"insertAfterLast"==e.opts.repeatMode&&n.insertAfter(e.find("."+e.opts.groupClass).last()),e.repeatCount++,$.isFunction(e.opts.afterAdd)&&e.opts.afterAdd.call(this,n),!1)}function e(t){var e=$(this),a=t.data,n=a.find("."+a.opts.groupClass);if(numRepeaters=n.length,numRepeaters>a.opts.minItems){if(r=e.closest("."+a.opts.groupClass),!r.length)if("append"==a.opts.repeatMode)var r=n.filter(":last");else if("prepend"==a.opts.repeatMode)var r=n.filter(":first");else if("insertAfterLast"==a.opts.repeatMode)var r=n.filter(":last");r.length&&(a.opts.animation?"slide"==a.opts.animation?r.slideUp(a.opts.animationSpeed,a.opts.animationEasing,function(){o(r,a)}):"fade"==a.opts.animation?r.fadeOut(a.opts.animationSpeed,a.opts.animationEasing,function(){o(r,a)}):"object"==typeof a.opts.animation&&r.animate(a.opts.animation,a.opts.animationSpeed,a.opts.animationEasing,function(){o(r,a)}):o(r,a))}return!1}function a(t,e,a,n){var o=e;if(a=parseInt(a),t){if(t.indexOf("+=")>-1){var r=t.match(/\+=(\d+)/i);if(r&&r.length&&r[1]){var s=parseInt(r[1]);o=t.replace(/\+=(\d)+/i,n.opts.startingIndex+a+s)}}t.indexOf("++")>-1&&(o=t.replace(/\+\+/gi,n.opts.startingIndex+a))}return o}function n(t){var e=t.find("."+t.opts.groupClass),a=t.opts.startingIndex,n;e.each(function(){n=$(this),r(n,a,t),a++})}function o(t,e){t.remove(),e.repeatCount&&e.repeatCount--,n(e),$.isFunction(e.opts.afterDelete)&&e.opts.afterDelete.call(this,t)}function r(t,e,n){var o=t.find(":input"),r,s,i,l,p,d,f,u;return o.length&&o.each(function(){u=$(this),r=u.data("pattern-name"),r&&(p=u.attr("name"),p=a(r,p,e,n),u.attr("name",p)),s=u.data("pattern-id"),s&&(l=u.attr("id"),l=a(s,l,e,n),u.attr("id",l)),$label=t.find("label[for="+u.attr("id")+"]"),$label.length||($label=u.parent("label")),$label.length||($label=u.siblings("label")),$label.length&&($label=$label.eq(0),i=$label.data("pattern-text"),d=$label.html(),d&&(d=a(i,d,e,n),$label.html(d)),f=$label.attr("for"),f&&l&&$label.attr("for",l))}),t}$.fn.repeater=function(n,o){var r=$(this),s,i,l,p,d,f,u,m,g,c,b,h,C,v,A;if(r.opts=$.extend({},$.fn.repeater.defaults,n),r.repeatCount=0,s=r.find("."+r.opts.btnAddClass),!s.length)return alert("You must specify a valid jQuery selector for the add button option in Form Repeater."),!1;if(r.group=$("."+r.opts.groupClass),!r.group.length)return alert("You must specify a valid jQuery selector for the form element grouping option in Form Repeater."),!1;if(i=r.group.find("."+r.opts.btnRemoveClass),i.length?i.hide():(i=$('<button type="button" name="rBtnRemove" class="'+r.opts.btnRemoveClass+'" style="display:none" />'),i.appendTo(r)),r.group=r.group.eq(0),r.groupClone=r.group.clone(),r.delegate("."+r.opts.btnRemoveClass,"click",r,e),r.delegate("."+r.opts.btnAddClass,"click",r,t),o&&o.length){for(C in o)v=r.groupClone.clone(),$.isFunction(r.opts.beforeAdd)&&(v=r.opts.beforeAdd.call(this,v)),A=v.find(":input"),A.length&&A.each(function(){c=$(this),b=c.data("name"),c.val("undefined"!=typeof o[C][b]?o[C][b]:""),l=c.data("pattern-name"),l&&(u=c.attr("name"),u=a(l,u,C,r),c.attr("name",u)),p=c.data("pattern-id"),p&&(f=c.attr("id"),f=a(p,f,C,r),c.attr("id",f)),h=v.find("label[for="+c.attr("id")+"]"),h.length||(h=c.parent("label")),h.length||(h=c.siblings("label")),h.length&&(h=h.eq(0),d=h.data("pattern-text"),m=h.html(),m&&(m=a(d,m,C,r),h.html(m)),g=h.attr("for"),g&&f&&h.attr("for",f))}),v.insertAfter($("."+r.opts.groupClass).last()),r.group&&(r.group.remove(),r.group=null),$.isFunction(r.opts.afterAdd)&&r.opts.afterAdd.call(this,v);$("."+r.opts.groupClass+" ."+r.opts.btnRemoveClass).show()}return this}}(jQuery),jQuery.fn.repeater.defaults={groupClass:"r-group",btnAddClass:"r-btnAdd",btnRemoveClass:"r-btnRemove",minItems:1,maxItems:0,startingIndex:0,reindexOnDelete:!0,repeatMode:"insertAfterLast",animation:null,animationSpeed:400,animationEasing:"swing",clearValues:!0,beforeAdd:function(t){return t},afterAdd:function(t){},beforeDelete:function(){},afterDelete:function(){}};